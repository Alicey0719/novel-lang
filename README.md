# Novel-Lang

## コンセプト

美少女ノベルゲームの世界観を表現した言語。  
ゲームのシナリオデータやゲーム画面・世界観を表現しつつ記述できる言語である。

## 構文ルール
<!-- 参考: ハミダシクリエイティブ シナリオデータ -->
-   文列:
    -   `文 (文)*` (よくわかってない)
-   文:
    -   代入
    -   分岐
    -   繰り返し
    -   出力
    -   分列
-   代入文:
    -   `【変数】（式）`  
        ※ （）は全角丸括弧  
        ~~※ 変数が初めに来ると因子との区別が大変かも~~
-   条件分岐:
    -   `🤔式……文(真)……文(偽)`  
        ※「……」は U+2026 を 2 つ (echo -e "\u2026\u2026")
        <!-- 美少ゲーテキストで多用される「……」 -->
-   繰り返し:
    -   `🕑式……文`  
        ※「……」は U+2026 を 2 つ (echo -e "\u2026\u2026")
        <!-- できない私が繰り返すから時計 -->
-   STD入力
    - `📝`
-   STD出力:
    -   `「式」`
-   式(exp):
    -   `calcの式準拠`
    -   不等号比較もほしい
-   項(term):
    -   `因子 (( ‘*’ | ‘/’ ) 因子)*` (Calc 準拠)
-   因子(fact):
    -   `リテラル | 【変数】 | ‘(‘ 式 ‘)’` (Calc 準拠)
-   文字列
    -   `⛄文字列⛄`
-   その他
    -   Bool がほしい？

## 拡張子
- `{filename}.nl`
- `{filename}.凸`

## 注意

-   絵文字がちゃんと出力されるターミナルと、うまく出力できないターミナルがある。  
    (VSCode, WindowsTerminal, Terminal(Mac) は問題なし。コマンドプロンプト, PowerShell, Termius はだめ。)

## こんな感じ？

### 例 1

```
【華乃】（131）
【天梨】（317）
🤔　【華乃】>【天梨】……【答え】（【華乃】-【天梨】）……【答え】（【天梨】-【華乃】）
「【答え】」
```

> 186

## 内部仕様

### メンバ変数
- `@@KEYS`
    - 言語で予約しているキーワードの対応ハッシュ
- `@@XXXX_RE`
    - 正規表現の定数(Str)
- `@nl_var_hash`
    - 言語内で定義した変数を保管するハッシュ
- `@debug`
    - DebugモードのON/OFFを定義するBool
- `@sc`
    - パースに使うStringScanner
- `@before_scan`
    - StringScannerがeosでunscanできないときのために前回のscan結果を保持する

### メソッド
未定